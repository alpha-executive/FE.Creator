@{
    ViewBag.Title = "Account Management";
}
<div class="row" ng-app="ngObjectRepository" ng-controller="AccountRecordsController as ctrl">
    <div class="col-md-12">
        <div class="callout callout-info">
            <h4>Attention</h4>
            <p>Even through account senstive data were encrypted by system, but we recommand you to download a cryptography tool to encrypt your sensitive data before save them to the system.
               The cryptography tool is unique for each download, be sure to keep the download version to a safe location, system only provide one time download option for each user.
            </p>
            <a href="/api/custom/Cryptography/GeneratePrivateKeyPairs" class="btn btn-box-tool btn-warning">Download Crypotography Tool</a>
        </div>   
        <div class="box box-primary" ng-if="ctrl.displayMode == 'accountRecordsList'">
            <div class="box-header">
                <div class="btn-group">
                    <button class="btn btn-box-tool" type="button" ng-click="ctrl.createOrEditAccountRecord(null)"><i class="fa fa-plus"></i> New Record</button>
                </div>
            </div>
            <div class="box-body">
                <table class="table table-condensed">
                    <tbody>
                        <tr>
                            <th style="width:5%;"></th>
                            <th style="width:15%;">Account Title</th>
                            <th style="width:20%;">Account No./Name</th>
                            <th>Password</th>
                            <th style="width:25%;">Description</th>
                            <th style="width:20%;">Action</th>
                        </tr>
                        <tr ng-repeat="record in ctrl.accountRecords">
                            <td><div class="badge" ng-class="{'bg-yellow': record.properties.accountType.value == 0, 'bg-red': record.properties.accountType.value == 1, 'bg-blue': record.properties.accountType.value == 2}">
                                    <i class="fa" ng-class="{'fa-envelope-o': record.properties.accountType.value == 0, 'fa-cc-visa': record.properties.accountType.value == 1, 'fa-mobile': record.properties.accountType.value == 2}"></i>
                                </div></td>
                            <td ng-bind="record.objectName"></td>
                            <td>{{record.properties.accountNumber.value}}</td>
                            <td><span ng-if="record.passDisplayVal == '******'" ng-repeat="i in [1,2,3,4,5,6]"><i class="fa fa-asterisk"></i></span> 
                                <span ng-if="record.passDisplayVal != '******'" ng-bind="record.passDisplayVal"></span>
                            </td>
                            <td ng-bind="record.properties.accountDesc.value"></td>
                            <td>
                                <button class="btn btn-success btn-flat btn-xs" ng-click="ctrl.showPassword(record)">
                                    <i class="fa fa-eye"></i>
                                </button>
                                <button type="button" class="btn btn-primary btn-flat btn-xs" ng-click="ctrl.createOrEditAccountRecord(record)">
                                    <i class="fa fa-pencil"></i>
                                </button>
                                <button type="button" class="btn btn-warning btn-flat btn-xs" ng-click="ctrl.deleteAccountRecord(record)">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="box box-warning" ng-if="ctrl.displayMode == 'accountRecordEditing'">
            <div class="box-body no-border">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="control-label col-sm-2"><i class="fa fa-tag"></i> Account Title</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" ng-model="ctrl.currentAccountRecord.objectName" auto-focus />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2">
                            <i class="fa fa-tag"></i> Description
                        </label>
                        <div class="col-sm-10">
                            <textarea rows="3" class="form-control" ng-model="ctrl.currentAccountRecord.properties.accountDesc.value"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2">
                            <i class="fa fa-tag"></i> Account Type
                        </label>
                        <div class="col-sm-10">
                            <div class="form-control">
                                <input type="radio" ng-model="ctrl.currentAccountRecord.properties.accountType.value" ng-value="0" ng-checked="ctrl.currentAccountRecord.properties.accountType.value == 0" /> Internet
                                <input type="radio" ng-model="ctrl.currentAccountRecord.properties.accountType.value" ng-value="1" ng-checked="ctrl.currentAccountRecord.properties.accountType.value == 1" /> Bank
                                <input type="radio" ng-model="ctrl.currentAccountRecord.properties.accountType.value" ng-value="2" ng-checked="ctrl.currentAccountRecord.properties.accountType.value == 2" /> Devices
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2">
                            <i class="fa fa-tag"></i> Account No./Login
                        </label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" ng-model="ctrl.currentAccountRecord.properties.accountNumber.value" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2">
                            <i class="fa fa-tag"></i> Password
                        </label>
                        <div class="col-sm-10">
                            <input type="password" class="form-control field-datepicker" ng-model="ctrl.currentAccountRecord.properties.accountPassword.value" />
                        </div>
                    </div>
                    <ul class="list-inline">
                        <li class="pull-right">
                            <button class="btn btn-box-tool" type="button" ng-click="ctrl.saveAccountRecord()"><i class="fa fa-save"></i> Save</button>
                            <button class="btn btn-box-tool" type="button" ng-click="ctrl.cancelAccountRecordEditing()"><i class="fa fa-close "></i> Cancel</button>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
    </div>
</div>
@section Scripts{
    @Scripts.Render("~/js/adminapp/accountrecord")
}
