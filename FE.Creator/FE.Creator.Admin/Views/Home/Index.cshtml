@{ 
    ViewBag.Title = "FEConsole";
}
<div class="row" ng-app="ngObjectRepository" ng-controller="DashboardController as ctrl">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                    <span class="info-box-icon bg-aqua"><i class="fa fa-lightbulb-o"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">@FE.Creator.Admin.lang.AppLang.INDEX_TOTAL_POSTS</span>
                        <span class="info-box-number" ng-bind="ctrl.totalPostCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                    <span class="info-box-icon bg-red"><i class="fa fa-image"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">@FE.Creator.Admin.lang.AppLang.INDEX_TOTAL_IMAGES</span>
                        <span class="info-box-number" ng-bind="ctrl.totalPhotosCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <!-- fix for small devices only -->
            <div class="clearfix visible-sm-block"></div>
            <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                    <span class="info-box-icon bg-green"><i class="fa fa-user"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">@FE.Creator.Admin.lang.AppLang.INDEX_TOTAL_CONTACTS</span>
                        <span class="info-box-number" ng-bind="ctrl.totalContactsCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box">
                    <span class="info-box-icon bg-yellow"><i class="fa fa-book"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text">@FE.Creator.Admin.lang.AppLang.INDEX_TOTAL_BOOKS</span>
                        <span class="info-box-number" ng-bind="ctrl.totalBooksCount"></span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
            <!-- /.col -->
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="box box-danger">
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div id="taskstatusreport" class="dashboard-report"></div>
                            </div>
                            <div class="col-md-6">
                                <div id="objusagestatusreport" class="dashboard-report"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 table-responsive">
                <div class="box box-primary">
                    <div class="box-header">
                        <h3 class="box-title"><i class="fa fa-lightbulb-o"></i> @FE.Creator.Admin.lang.AppLang.INDEX_REPORT_POSTS</h3>
                    </div>
                    <div class="box-body table-responsive">
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_TITLE</th>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_AUTHOR</th>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_DATE</th>
                                </tr>
                                <tr ng-repeat="post in ctrl.posts">
                                    <td>
                                        <a class="product-title article-tilte cursor-pointer" href="/ngView/EditOrDisplay/Efficiency/ArticleIndex/{{post.objectID}}">
                                            <i class="fa fa-lightbulb-o text-green"></i>  {{post.objectName}}
                                        </a>
                                    </td>
                                    <td><span class="text-muted label label-warning">{{post.createdBy}}</span></td>
                                    <td><span class="text-muted label label-primary"><i class="fa fa-clock-o"></i> {{post.created | dateformatFilter : 'MMM Do YYYY'}}</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="box-footer text-center">
                        <a class="uppercase" href="/ngview/Index/Efficiency/ArticleIndex">@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_VIEW_ALLPOSTS</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="box box-primary">
                    <div class="box-header">
                        <h3 class="box-title"><i class="fa fa-book"></i> @FE.Creator.Admin.lang.AppLang.INDEX_REPORT_BOOKS</h3>
                    </div>
                    <div class="box-body">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_TITLE</th>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_AUTHOR</th>
                                    <th>@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_COL_VERSION</th>
                                </tr>
                                <tr ng-repeat="book in ctrl.books">
                                    <td>
                                        <a class="product-title article-tilte cursor-pointer" href="{{book.properties.bookFile.fileUrl}}">
                                            <i class="fa fa-book text-red"></i> {{book.objectName}}
                                        </a>
                                    </td>
                                    <td><span class="text-muted label label-warning">{{book.properties.bookAuthor.value}}</span></td>
                                    <td><span class="text-muted label label-primary" ng-if="book.properties.bookVersion.value != null"><i class="fa fa-clock-o"></i> {{book.properties.bookVersion.value}}</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="box-footer text-center">
                        <a class="uppercase" href="/ngview/Index/Books/BookIndex">@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_VIEW_ALLBOOKS</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="box box-success">
                    <div class="box-header">
                        <h3 class="box-title"><i class="fa fa-image"></i> @FE.Creator.Admin.lang.AppLang.INDEX_REPORT_LATEST_IMAGES</h3>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-2 margin-bottom" ng-repeat="img in ctrl.images">
                                <div class="image-card">
                                    <div class="image-wrapper">
                                        <img class="img-responsive" style="width:100%; max-height:150px; border-radius:5px;" src="{{img.properties.imageFile.fileUrl}}?thumbinal=true" alt="{{img.objectName}}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer text-center">
                        <a class="uppercase" href="/ngview/Index/Photos/PhotoIndex">@FE.Creator.Admin.lang.AppLang.INDEX_REPORT_VIEW_ALLIMGS</a>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div id="yoyimagereport" class="dashboard-report"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts{
     @Scripts.Render("~/js/adminapp/dashboard")
     @Scripts.Render("~/js/echarts")
     @Scripts.Render("~/js/apputilities")
}
<script type="text/javascript">
    $(document).ready(function () {
        //Task and Target status guague report
        $.ajax({
            url: "/api/custom/report/TargetStatusReport",
            dataType: "json",
            success: function (data) {
                if (Array.isArray(data) && data.length == 2) {
                    var option = getCarGaugesOption(AppLang.INDEX_REPORT_NAME_TARGET, AppLang.INDEX_REPORT_NAME_TASK);
                    option.title.text = AppLang.INDEX_AVG_PROGRESS_REPORT;
                    option.title.subtext = AppLang.INDEX_SUBTXT_TT;
                    option.series[0].data[0].value = data[0].toFixed(2);
                    option.series[1].data[0].value = data[1].toFixed(2);

                    createChart(document.getElementById('taskstatusreport'),
                            option,
                            'default'
                        );
                }
            }
        });

        //Key objects statistic bar report.
        $.ajax({
            url: "/api/custom/report/YOYObjectUsageReport/Article,Diary,Books",
            dataType: "json",
            success: function (data) {
                if (Array.isArray(data) && data.length > 0) {
                    var option = getColumnChartOption(getYoYMonths(), [AppLang.INDEX_REPORT_NAME_POST, AppLang.INDEX_REPORT_NAME_DIARY, AppLang.INDEX_REPORT_NAME_BOOK]);
                    option.title.text = AppLang.INDEX_YOY_STATICS_REPORT;
                    option.title.subtext = AppLang.INDEX_SUBTXT_PBD;
                    option.series.push({
                        name: AppLang.INDEX_REPORT_NAME_POST,
                        type: 'line',
                        smooth: true,
                        data: data[0],
                        markLine: {
                            data: [
                                { type: 'average', name: AppLang.INDEX_REPORT_NAME_AVG }
                            ]
                        }
                    });
                    option.series.push({
                        name: AppLang.INDEX_REPORT_NAME_DIARY,
                        type: 'line',
                        smooth: true,
                        data: data[1],
                        markLine: {
                            data: [
                                { type: 'average', name: AppLang.INDEX_REPORT_NAME_AVG }
                            ]
                        }
                    });
                    option.series.push({
                        name: AppLang.INDEX_REPORT_NAME_BOOK,
                        type: 'line',
                        smooth: true,
                        data: data[2],
                        markLine: {
                            data: [
                                { type: 'average', name: AppLang.INDEX_REPORT_NAME_AVG }
                            ]
                        }
                    });

                    createChart(document.getElementById('objusagestatusreport'),
                            option,
                            'default'
                        );
                }
            }
        });

        //Image YoY Reports.
        $.ajax({
            url: "/api/custom/report/YOYObjectUsageReport/Photos",
            dataType: "json",
            success: function (data) {
                if (Array.isArray(data) && data.length > 0) {
                    var option = getColumnChartOption(getYoYMonths(), [AppLang.INDEX_REPORT_NAME_IMGS]);
                    option.title.text = AppLang.INDEX_YOY_STATICS_REPORT;
                    option.title.subtext = AppLang.INDEX_SUBTXT_IMG;
                    option.series.push({
                        name: AppLang.INDEX_REPORT_NAME_IMGS,
                        type: 'line',
                        smooth: true,
                        data: data[0],
                        itemStyle: { normal: { areaStyle: { type: 'default' } } },
                        markLine: {
                            data: [
                                { type: 'average', name: AppLang.INDEX_REPORT_NAME_AVG }
                            ]
                        }
                    });
                    createChart(document.getElementById('yoyimagereport'),
                            option,
                            'default'
                        );
                }
            }
        });
    });
</script>